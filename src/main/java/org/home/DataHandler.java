package org.home;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.nio.file.Files;
import java.nio.file.Paths;
import java.util.HashMap;
import java.util.Map;

public class DataHandler {

  private static final Logger logger = LoggerFactory.getLogger(DataHandler.class);

  private static final Map<String, String> dataMap = new HashMap<>();
  private static final Map<String, String> imageMap = new HashMap<>();

  static {

    String projectRoot = System.getProperty("user.dir");
    imageMap.put("cam1", Paths.get(projectRoot, "images", "cam1.jpg").toString());
    dataMap.put("cam1","–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –∫–∞–º–µ—Ä—ã 1");

    imageMap.put("cam2", Paths.get(projectRoot, "images", "cam2.jpg").toString());
    dataMap.put("cam2","–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –∫–∞–º–µ—Ä—ã 2");

    imageMap.put("cam3", Paths.get(projectRoot, "images", "cam3.jpg").toString());
    dataMap.put("cam3","–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –∫–∞–º–µ—Ä—ã 3");

    imageMap.put("cam4", Paths.get(projectRoot, "images", "cam4.jpg").toString());
    dataMap.put("cam4","–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –∫–∞–º–µ—Ä—ã 4");

    imageMap.put("cam5", Paths.get(projectRoot, "images", "cam5.jpg").toString());
    dataMap.put("cam5","–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –∫–∞–º–µ—Ä—ã 5");


    dataMap.put(
        "uk",
        """
            * –î–∏—Å–ø–µ—Ç—á–µ—Ä –£–ö –°–∏—Ç–∏ –î–æ–º (—Å 8-30 –¥–æ 17-30): 248-02-09
            * –ê–≤–∞—Ä–∏–π–Ω–∞—è —Å–ª—É–∂–±–∞ –£–ö –°–∏—Ç–∏ –î–æ–º (—Å 17-30 –¥–æ 8-30): 291-93-10, 226-69-50
            * –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç: 8 909 731 78 96
            * –°–∞–Ω—Ç–µ—Ö–Ω–∏–∫ –ò–ª—å—è: 8 902 805 74 02
            * –≠–ª–µ–∫—Ç—Ä–∏–∫ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –°–µ—Ä–≥–µ–µ–≤–∏—á: 8 902 792 62 70
            """);

    dataMap.put(
        "hvs",
        """
            * –•–í–°, –≤–æ–¥–æ–æ—Ç–≤–µ–¥–µ–Ω–∏–µ /–û–û–û ¬´–Æ–≥-–°–µ—Ä–≤–∏—Å¬ª
              –ê–¥—Ä–µ—Å: –ø.–§–µ—Ä–º–∞, —É–ª.–ù–µ–∫—Ä–∞—Å–æ–≤–∞ –¥.11 –∫–≤.3
              –¢–µ–ª–µ—Ñ–æ–Ω: 230-96-02
              –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã:
              –ü–Ω-—á—Ç: 08-00 ‚Äì 17-00; –ü—Ç: 08-00 ‚Äì 16-00 (–ø–µ—Ä–µ—Ä—ã–≤ 12-00 ‚Äì 13-00)

            * –ü–æ–∫–∞–∑–∞–Ω–∏—è –ò–ü–£ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Å 15 –¥–æ 22 —á–∏—Å–ª–∞ –∫–∞–∂–¥–æ–≥–æ –º–µ—Å—è—Ü–∞:
              - –ê–≤—Ç–æ–æ—Ç–≤–µ—Ç—á–∏–∫: 8 922 310 69 87
              - –í–æ–ø—Ä–æ—Å—ã –ø–æ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è–º: 294-60-07
              –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã: –ü–Ω-—á—Ç 8-00 –¥–æ 17-00 (–ø–µ—Ä–µ—Ä—ã–≤ 12-00 –¥–æ 13-00); –ü—Ç 8-00 –¥–æ 16-00
            """);

    dataMap.put(
        "gvs",
        """
            * –ì–í–°, —Ç–µ–ø–ª–æ | –û–û–û ¬´–ü–û–¢–û–ö¬ª
              –ê–¥—Ä–µ—Å: –≥.–ü–µ—Ä–º—å, —É–ª.–ì–µ—Ä–æ–µ–≤ –•–∞—Å–∞–Ω–∞, 98, 4-–π —ç—Ç–∞–∂
              –¢–µ–ª–µ—Ñ–æ–Ω—ã: 233-93-68, 233-93-67

            * –ü–æ–∫–∞–∑–∞–Ω–∏—è –ò–ü–£ –ì–í–° –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Å 15 –ø–æ 25 —á–∏—Å–ª–æ:
              - –¢–µ–ª–µ—Ñ–æ–Ω—ã: 8(342)233-93-68; 233-93-72
              - –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞: rccperm@yandex.ru
              - –í–∞–π–±–µ—Ä: 8 912 98 00 750
              - –ß–µ—Ä–µ–∑ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
            """);

    dataMap.put(
        "energy",
        """
    * –≠–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏—è | –ü–ê–û ¬´–ü–µ—Ä–º—ç–Ω–µ—Ä–≥–æ—Å–±—ã—Ç¬ª *
    –ê–¥—Ä–µ—Å: —Å.–§—Ä–æ–ª—ã, —É–ª.–í–µ—Å–µ–Ω–Ω—è—è, –¥.4, –æ—Ñ–∏—Å 3, 1 —ç—Ç–∞–∂
    –¢–µ–ª–µ—Ñ–æ–Ω: 8 (342) 297-80-23
    –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã:
    –ü–Ω-–ü—Ç: 08-00 ‚Äì 18-00 (–ø–µ—Ä–µ—Ä—ã–≤ —Å 13-00 –¥–æ 14-00)

    –ü–æ–∫–∞–∑–∞–Ω–∏—è –ò–ü–£ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –æ–¥–Ω–∏–º –∏–∑ —É–¥–æ–±–Ω—ã—Ö —Å–ø–æ—Å–æ–±–æ–≤ —Å 20 –ø–æ 25 —á–∏—Å–ª–æ –∫–∞–∂–¥–æ–≥–æ –º–µ—Å—è—Ü–∞.
    """);

    dataMap.put(
        "trash",
        """
    * –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä –¢–ö–û *
    –ö–æ–Ω—Ç–∞–∫—Ç—ã: 8 (342) 236-90-55 (–º–Ω–æ–≥–æ–∫–∞–Ω–∞–ª—å–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω)

    –û–±—Ä–∞—â–µ–Ω–∏–µ –º–æ–∂–Ω–æ –Ω–∞–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é –ø–æ—á—Ç—É:
    –ê–û ¬´–ü–†–û –¢–ö–û¬ª: info@te-perm.ru

    –ü–æ –≤–æ–ø—Ä–æ—Å–∞–º –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π –∏ –æ–ø–ª–∞—Ç—ã:
    –û–±—Ä–∞—â–∞—Ç—å—Å—è –≤ –æ—Ñ–∏—Å –û–ê–û "–ö–†–¶-–ü—Ä–∏–∫–∞–º—å–µ" –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É (342) 258-44-84.
    """);

    dataMap.put(
        "ant",
        """
    * –ö–æ–ª–ª–µ–∫—Ç–∏–≤–Ω–∞—è –∞–Ω—Ç–µ–Ω–Ω–∞ | –û–û–û –ê–ù–¢ *
    –¢–µ–ª–µ—Ñ–æ–Ω: 277-03-73
    –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã: —Å 9-00 –¥–æ 17-00
    """);

    dataMap.put(
        "administration",
        """           
            –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ!
            """);

    dataMap.put(
        "advanced_search",
        """
            üîç *–ü–æ–∏—Å–∫ –ø–æ —Ç–∞–±–ª–∏—Ü–µ:*\n
            –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º:\n
            - –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞.\n
            - –ù–æ–º–µ—Ä –∫–≤–∞—Ä—Ç–∏—Ä—ã.\n
            - –ù–æ–º–µ—Ä –∞–≤—Ç–æ–º–æ–±–∏–ª—è.\n
            –í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –ø–æ–∏—Å–∫!
            –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ!
            """);

    logger.info("DataHandler –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å {} —Ç–µ–∫—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏ {} –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏.",
            dataMap.size(), imageMap.size());
  }

  public static String getResponse(String callbackData) {
    String response = dataMap.getOrDefault(callbackData, "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞.");
    logger.info("–ü–æ–ª—É—á–µ–Ω –∑–∞–ø—Ä–æ—Å –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ: callbackData={}, response={}", callbackData, response);
    return response;
  }

  public static String getImage(String callbackData) {
    String imagePath = imageMap.get(callbackData);
    if (imagePath != null && Files.exists(Paths.get(imagePath))) {
      logger.info("–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ: callbackData={}, imagePath={}", callbackData, imagePath);
      return imagePath;
    } else {
      logger.warn("–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ: callbackData={}", callbackData);
      return null;
    }
  }
}
